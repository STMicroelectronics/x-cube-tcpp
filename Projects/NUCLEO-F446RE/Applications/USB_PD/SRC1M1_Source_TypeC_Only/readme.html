<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Readme</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" href="./../../../../_htmresc/mini-st_2020.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div class="row">
<div class="col-sm-12 col-lg-8">
<h2 id="src1m1_source_typec_only-application-description"><b>SRC1M1_Source_TypeC_Only Application Description</b></h2>
<p>This application provides an example for managing an USB Type C port as Source, without Power Delivery.</p>
<p>Goal is to identify a Type-C connection to a sink device and to determine the RD Resistor exposed by it (with the help of an ADC).</p>
<p>When a sink device is connected through a Type-C cable: GREEN LED on NUCLEO-F446RE switches on which means that VBUS is provided to the port partner.</p>
<p>This application has been certified with USB Type-C Test Conformance Tools (Ellisys, MQP, GRL and LeCroy).</p>
<p>Vendor Information File, used for Conformance testing and describing Port capabilities and supported options is provided in application directory in STMicroelectronics_SRC1M1_Source_STM32F446RE_VIF.xml file.</p>
<p>This application is based on the following wiki: <a href="https://wiki.st.com/stm32mcu/wiki/STM32StepByStep:Getting_started_with_USB_Type-C_only_Source">Getting_started_with_USB_Type-C_only_Source</a></p>
<h4 id="expected-success-behavior"><b>Expected success behavior</b></h4>
<p>Vbus is active 120 ms after plugging an USB Type-C source device.</p>
<p>Vbus is immediately shut down and placed in safe mode (0V) when unplugging the sink device.</p>
<p>During connection, if an overcurrent or malfunction is detected, the Source is placed in safe mode (0V) and needs a disconnection/reconnection to restart.</p>
<h4 id="error-behaviors"><b>Error behaviors</b></h4>
<p>Errors are detected and the corresponding message is displayed on the STM32CubeMonUCPD.</p>
<h4 id="assumptions-if-any"><b>Assumptions if any</b></h4>
<p>None.</p>
<h4 id="known-limitations"><b>Known limitations</b></h4>
<p>None.</p>
<h3 id="keywords"><b>Keywords</b></h3>
<p>Connectivity, UART/USART, Type C</p>
<h3 id="hardware-and-software-environment"><b>Hardware and Software environment</b></h3>
<ul>
<li>This application runs on STM32F4XX devices</li>
<li><p>This application has been tested with STMicroelectronics NUCLEO-F446RE board with X-NUCLEO-SRC1M1 expansion board and can be easily tailored to any other supported device and development board.</p></li>
<li>X-NUCLEO-SRC1M1 Set-up
<ul>
<li>Move CC1 (J2) Jumper to the CC1 no UCPD position 2/3</li>
<li>Move CC2 (J3) Jumper to the CC2 no UCPD position 2/3</li>
<li>JP1 1-2 (LDO_OUT) jumper ON</li>
<li>JP1 3-4 (RESET) jumper ON</li>
<li>Supply CN3 with a 5V power supply</li>
<li>Connect PA3 (CN10 - 37) and PC4 (CN10 - 34) together<br />
</li>
<li>Optional, for up to 3.0A:
<ul>
<li>Remove R35 and place it on SH19</li>
<li>Remove R39 and place it on SH21</li>
<li>Change R5 shunt resistor to a 10mOhms one</li>
</ul></li>
</ul></li>
</ul>
<h3 id="how-to-use-it"><b>How to use it ?</b></h3>
<p>In order to make the program work, you must do the following :</p>
<ul>
<li>Open your preferred toolchain</li>
<li>Rebuild all files and load your image into target memory</li>
<li>Run the application</li>
</ul>
</body>
</html>
